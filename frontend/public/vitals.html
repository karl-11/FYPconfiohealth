<!DOCTYPE html>
<html lang="en">

<head>
    <title>Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!--Custom CSS-->
    <link rel="stylesheet" type="text/css" href="./css/Custom.css">
    <link rel="stylesheet" type="text/css" href="./css/Vitals.css">

    <!--Font import-->
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>

    <!--JQuery-->
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <!--Axios-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!--Include Header & Footer-->
    <script>
        $(function () {
            $("#header").load("header.html");
            $("#footer").load("footer.html");
        });
    </script>

</head>

<body class="font-montserrat body">
    <!--Header section-->

    <section class="w-75 min-vh-100 mx-auto pb-170px">
        <span id="header"></span>


        <div class="scrollmenu hidescroll" onchange="displayRadioValue()">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="heartrate" value="heartrate"
                    checked>
                <label class="form-check-label card border-0 p-2 text-center shadow-bottom bg-cards border rounded-4"
                    for="heartrate">
                    <img src="images/icons8-heartwithpulse.png" class="align-self-center" alt="">
                    Heart Rate
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="bloodpressure"
                    value="bloodpressure">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="bloodpressure">
                    <img src="images/icons8-bloodpressure.png" class="align-self-center" alt="">
                    Blood Pressure
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="glucoselevel" value="glucoselevel">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="glucoselevel">
                    <img src="images/icons8-monitoringglucose.png" class="align-self-center" alt="">
                    Glucose Level
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="HDL" value="HDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="HDL">
                    <img src="images/icons8-cholesterolHDL.png" class="align-self-center" alt="">
                    HDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="vitalsradio" id="LDL" value="LDL">
                <label class="form-check-label flex-column card border-0 p-2 text-center" for="LDL">
                    <img src="images/icons8-cholesterolLDL.png" class="align-self-center" alt="">
                    LDL
                </label>
            </div>
            <div class="form-check form-check-inline">
                <button type="button" class="btn flex-column card border-0 p-2 text-center" onclick="on()">
                    <img src="images/icons8-plus.png" alt="">
                </button>
            </div>
        </div>

        <div id="overlay" onclick="off()">

        </div>

        <div id="overlaycontent" class="bg-beige" onchange="displayCheckValue()">
            <div>
                <div>
                    <div class="container">
                        <h3>Selected</h3>
                        <div id="selected" class="row">

                        </div>

                        <h3>Not Selected</h3>
                        <div id="notselected" class="row">

                        </div>
                    </div>
                </div>
            </div>
            <button onclick="off()">
                Off
            </button>
        </div>
        <!--Footer section-->
        <span id="footer"></span>
    </section>

    <!--bootstrap bundle script-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Get vitals from table and put into html
        const baseUrl = "http://localhost:3000";

        axios.get(`${baseUrl}/vitals`)
            .then((response) => {

                var vitalsStringSelected = "";
                var vitalsStringNotSelected = "";

                for (i = 0; i < response.data.length; i++) {

                    //  console.log("printing vitals get response.data" + i);
                    var data = response.data[i];
                    // console.log(data);
                    if (data.checked == "yes") {
                        var vitalsStringSelected = vitalsStringSelected +
                            `
                                    <div class="form-check col-lg-3 col-md-4 m-0 p-0">
                                        <input class="form-check-input" type="checkbox" value="" name="vitalscheck" id="${data.vital_sign_type.toLowerCase()}" checked>
                                         <label class="form-check-label text-center" for="${data.vital_sign_type.toLowerCase()}">
                                            <img src="${data.vital_sign_img}" class="align-self-center" alt="">
                                            <p>
                                                ${data.vital_sign_type}
                                            </p>
                                         </label>
                                    </div>
                                    `
                    }
                    else if (data.checked == "no") {
                        var vitalsStringNotSelected = vitalsStringNotSelected +
                            `
                                    <div class="form-check col-lg-3 col-md-4 m-0 p-0">
                                        <input class="form-check-input" type="checkbox" value="" name="vitalscheck" id="${data.vital_sign_type.toLowerCase()}">
                                         <label class="form-check-label text-center" for="${data.vital_sign_type.toLowerCase()}">
                                            <img src="${data.vital_sign_img}" class="align-self-center" alt="">
                                            <p>
                                                ${data.vital_sign_type}
                                            </p>
                                         </label>
                                    </div>
                                    `
                    }
                }
                document.getElementById("selected").innerHTML = vitalsStringSelected;
                document.getElementById("notselected").innerHTML = vitalsStringNotSelected;

                // Hide check Button
                for (let i = 0; i < vitalscheck.length; i++) {
                    console.log("test");
                    vitalscheck[i].style.display = "none";
                }
            })
            .catch((error) => {
                console.log(error);
            });

        //console.log(vitals);
        var vitalsradio = document.getElementsByName("vitalsradio");
        var vitalscheck = document.getElementsByName("vitalscheck");

        console.log(vitalsradio);
        console.log(vitalscheck);
        // Hide Radio Button
        for (let i = 0; i < vitalsradio.length; i++) {
            vitalsradio[i].style.display = "none";
        }



        // too see the value of selected radio
        function displayRadioValue() {
            console.log(vitalsradio)
            for (i = 0; i < vitalsradio.length; i++) {
                if (vitalsradio[i].checked) {
                    console.log("vital: " + vitalsradio[i].value)
                }
            }
        }

        function displayCheckValue() {
            console.log(vitalscheck)
            for (i = 0; i < vitalscheck.length; i++) {
                if (vitalscheck[i].checked) {
                    console.log("checked: " + vitalscheck[i].id)
                }
            }
        }

        // Add border and background to Selected Radio
        $(document).ready(function () {
            $('.form-check-inline>label').click(function () {
                $('label').removeClass(' shadow-bottom bg-cards border rounded-4');
                $(this).addClass(' shadow-bottom bg-cards border rounded-4');
            });
        });

        // Make Vitals scrollable by dragging
        const slider = document.querySelector('.scrollmenu');
        let mouseDown = false;
        let startX, scrollLeft;

        let startDragging = function (e) {
            mouseDown = true;
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        };
        let stopDragging = function (event) {
            mouseDown = false;
        };

        slider.addEventListener('mousemove', (e) => {
            e.preventDefault();
            if (!mouseDown) { return; }
            const x = e.pageX - slider.offsetLeft;
            const scroll = x - startX;
            slider.scrollLeft = scrollLeft - scroll;
        });

        // Add the event listeners
        slider.addEventListener('mousedown', startDragging, false);
        slider.addEventListener('mouseup', stopDragging, false);
        slider.addEventListener('mouseleave', stopDragging, false);

        // Overlay On
        function on() {
            document.getElementById("overlay").style.width = "100%";
            document.getElementById("overlaycontent").style.width = "50%";
        }
        // Overlay Off
        function off() {
            document.getElementById("overlay").style.width = "0%";
            document.getElementById("overlaycontent").style.width = "0%";
        }
    </script>

</body>


</html>